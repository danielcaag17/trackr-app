{% extends 'base.html' %}
{% load static %}
{% block title %}Trackr - Video Analysis{% endblock %}

{% block head %}
    <script src="{% static 'js/upload.js' %}"></script>
{% endblock %}

{% block content %}
    <main class="main-wrapper centered">
        <div class="center-content">
            <h1 class="main-title">Detect People in<br>Your Videos</h1>
            <hr class="divider"/>
            <p class="description">
                Upload a video, and our model will identify the people present and generate related statistics.
            </p>

            {% if running_local %}
                <form id="upload-form" action="{% url 'api_upload_video' %}" method="POST" enctype="multipart/form-data"
                      class="upload-form">
                    {% csrf_token %}

                    <label for="video-input" class="upload-label">Select the desired video</label>
                    <label for="video-input" class="custom-file-upload upload-btn">
                        Choose File
                    </label>
                    <div id="file-name" class="file-name">No file selected</div>
                    <input type="file" id="video-input" class="video-input" name="video" accept="video/mp4,video/avi,video/mov" required>

                    <button type="submit" class="upload-btn">Upload Video</button>
                    <a href="/predefined-videos" class="predefined-link">Or see predefined videos</a>
                </form>
            {% else %}
                <form id="upload-form" method="POST" enctype="multipart/form-data" class="upload-form">
                    {% csrf_token %}

                    <label for="video-input" class="upload-label">Select the desired video</label>
                    <label for="video-input" class="custom-file-upload upload-btn">
                        Choose File
                    </label>
                    <div id="file-name" class="file-name">No file selected</div>
                    <input type="file" id="video-input" class="video-input" name="video" accept="video/*" required>

                    <!-- Button tooltip -->
                    <div class="tooltip-container">
                        <button type="button" class="upload-btn disabled-btn" disabled>
                            Upload Video
                        </button>
                        <span class="tooltip-text">
                            This feature is under development. Check predefined videos.
                        </span>
                    </div>
                    <a href="/predefined-videos" class="predefined-link">Or see predefined videos</a>
                </form>
            {% endif %}

            <div class="info-hints">
                <p><strong>Supported formats:</strong> MP4, AVI, MOV · Max 500MB</p>
                <p><strong>Processing time:</strong> Usually under 1 minute</p>
                <p><strong>Privacy:</strong> We don’t store your videos. All processing is secure and local.</p>
            </div>
        </div>
    </main>
{% endblock %}
